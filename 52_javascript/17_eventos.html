<!doctype html>
<html lang="pt-br">
    <head>
        <title>Estrutura Básica</title>
        <meta charset="utf-8">
        <meta name="author" content="João"> 
        <meta name="description" content="Curso Web Design">
        <meta name="keywords" content="html5, css3, javascript">
        <meta name="viewport" content="width=device-width">
    </head>
    <body>
<!--    eventos no JS: 
        - um evento é uma ação executada por algo ou alguém (usuário ou browser)
        - um disparador de evento é o elemento HTML que originou aquele evento
        - alguns eventos ocorrem de maneira padrão pelo browser (ex.: abrir uma página, submeter um form, etc)
        - Event Handler (manipulador de evento) é a função a ser executada quando ocorre o evento. ex.: click, mouseover, mouseout, keyup, submit, load...  
    
        Event Handler: 
    
        DOM level 0 (= maneira mais antiga de atrelar um evento):
        - no HTML: 
        <p onclick="função()">  
        - no JS:
        p.onclick=funcao 
    
        DOM level 2:
        p.addEventListener("click", funcao);    -->
        <h1>Javascript</h1>

            <!-- DOM level 0: -->
        <button id="btn1" onclick="clicar()">Botão 1</button> 
        <button id="btn2">Botão 2</button>
            <!-- DOM level 2: -->
        <button id="btn3">Botão 3</button>

        <div class="container">
            <h1>propagação de eventos</h1>
            <div id="d1" style="background: red; padding: 25px;">
                texto dentro da div
                <span style="background: yellow;">texto dentro da span</span>
            </div>
        </div>

        <div class="div container">
            <h1>delegação de eventos</h1>
            <ul>
                <li>lista 1</li>
                <li>lista 2</li>
                <li>lista 3</li>
            </ul>
        </div>
        
        <script>
            var btn2 = document.getElementById('btn2');
            var btn3 = document.getElementById('btn3');

            btn2.onclick = clicar();

            function clicar(){
                alert('clicou');

                return function(){
                    alert('clicou 2');
                }
            }

            btn3.addEventListener('click', function(){ // = DOM level 2 tem que ter pelo menos 2 (dois) parâmetros: nome do evento ('click') e a função que será executada ('function()')
                alert('click DOM level 2');
            });
            btn3.addEventListener('click', function(){ // = com DOM level 2 é possível atrelar 2 (dois) eventos no mesmo elemento HTML
                alert('click DOM level 2 com outro evento');
            });

//          Propagação:
//          - capacidade dos eventos de percorrerem a estrutura do HTML, desde o elemento original até o nível mais alto (numa página web, é o body)
            var $d1 = document.querySelector('#d1'); 
            var $d1Span = document.querySelector('#d1 span');
            // = utilizando '$' para indicar documento HTML

            $d1.addEventListener('click', function(){
                console.log('click no $d1');
            }, false); // adicionando o terceiro parâmetro = é possível alterar a propagação (ordem) do elemento 

            $d1Span.addEventListener('click', function(e){
                console.log('click no $d1Span');
//          e.stopPropagation(); // = PARA a propagação do evento
            }, false);

//          Objeto Event:
//          - objeto passado por parâmetro para a função que foi atrelada nos fornecendo várias informações adicionais sobre o evento em si. este objeto varia de acordo com o tipo do evento
            document.addEventListener('click', function(e){
                console.log('clicou no document');
                console.log(e.currentTarget); 
                console.log(this); 
                // = 'currentTarget' e 'this' são a mesma coisa: elemento a qual foi atrelado o evento 
                console.log(e.target);
            }, false);

//          Objeto Event:
//          - técnica que consiste em atrelar o evento a um elemento mais alto e verificar quem foi o elemento clicado
            var $ul = document.querySelector('ul');
            var $lis = document.querySelectorAll('li');

            // var x = 0;
            // while($lis[x]){
            //     $lis[x].addEventListener('click', function(){
            //         console.log('clicou na li');
            //     })
            //     x++;
            // }

            $ul.addEventListener('click', function(e){
                e.stopPropagation();
                console.log(this);
                console.log(e.currentTarget);
                console.log(e.target);

                console.log(e.target.nodeName);
                if(e.target.nodeName === "LI"){
                    alert('clicou na li');
                }
            });
        </script>
    </body>
</html>